import{_ as S,r as v,d as x,c as n,b as g,w as B,e as s,h as l,t as c,f as p,o as i,g as F,v as V,a as t,i as N,p as E,j as T}from"./index-BGjxC-AE.js";import{u as C,a as I,c as z}from"./index.esm-Dx5m0Y3n.js";import{a as A}from"./axios-Cm0UX6qg.js";import{G as D}from"./loginStyle-Ch6ds3C3.js";const u=a=>(E("data-v-47a6db95"),a=a(),T(),a),P={class:"screen"},Z=u(()=>t("h1",null,"Få nytt passord",-1)),j=u(()=>t("p",{class:"description"},[l("Skriv inn e-postadressen du registrerte deg med. "),t("br"),l("Vi sender deg en lenke for å logge inn og tilbakestille passordet ditt.")],-1)),q={key:0,class:"error"},G={key:1,class:"error"},M=["disabled"],R={key:0},$=u(()=>t("br",null,null,-1)),O={__name:"ForgotPasswordView",setup(a){const r=v(""),d=v(""),{handleSubmit:f,errors:m,meta:_}=C(),k=f(async()=>{try{const e=await A.post("http://localhost:8080/api/forgot_password",o.value,{headers:{"Content-Type":"text/plain"}});console.log(e.data),r.value="",d.value=o.value}catch(e){e.response&&e.response.status===404?(console.error("This email is not registered."),r.value="Eposten er ikke registrert"):console.error("Sending email with new password failed:",e)}}),w=/^[a-zA-Z0-9._%+-æøåÆØÅ]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,{value:o}=I("email",z().required("Epost må fylles ut").matches(w,"Må være en gyldig epost"));return(e,h)=>{const y=x("Form");return i(),n("div",P,[g(D,{page:"/login",class:"goBackButton"}),Z,j,g(y,{onSubmit:s(k)},{default:B(()=>[s(m).email?(i(),n("span",q,c(s(m).email),1)):p("",!0),F(t("input",{type:"text",name:"email","onUpdate:modelValue":h[0]||(h[0]=b=>N(o)?o.value=b:null),placeholder:"Din e-post adresse",class:"input",required:""},null,512),[[V,s(o)]]),r.value?(i(),n("span",G,c(r.value),1)):p("",!0),t("button",{type:"submit",class:"sendNewPassword",disabled:!s(_).valid||!s(_).dirty},"Send nytt passord",8,M)]),_:1},8,["onSubmit"]),d.value?(i(),n("p",R,[l("En epost med nytt passord er sendt til "+c(d.value)+" ",1),$,l("OBS! Sjekk spamfilteret ditt hvis du ikke finner mailen.")])):p("",!0)])}}},L=S(O,[["__scopeId","data-v-47a6db95"]]);export{L as default};
